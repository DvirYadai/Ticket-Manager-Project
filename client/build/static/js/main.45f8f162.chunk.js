(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=(n(64),n(10)),i=n.n(a),o=(n(40),n(17)),s=n.n(o),l=n(27),u=n(15),j=n(21),d=n.n(j),b=n(44),p=n(54),O=n(159),h=n(163),f=n(164),k=n(4);function x(e){var t=e.tickets,n=e.setTickets,c=e.ticket,a=e.setCounter,i=e.counter,o=e.setOpenSnackBar,j=e.setIsServerDown,x=Object(r.useState)(!0),m=Object(u.a)(x,2),v=m[0],w=m[1],S=Object(r.useState)(c.done),g=Object(u.a)(S,2),T=g[0],N=g[1],y=Object(r.useState)(!1),C=Object(u.a)(y,2),D=C[0],B=C[1],E=function(e){var r=e.target.parentNode.parentNode,c=Array.from(document.querySelectorAll(".ticket")).indexOf(r),o=Object(b.a)(t);o.splice(c,1),n(o),a(i+1)},z=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=12;break}return e.prev=1,e.next=4,d.a.patch("/api/tickets/".concat(c._id,"/undone"));case 4:N(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),"Network Error"===e.t0.toJSON().message?(j(!1),o(!0)):(j(!0),o(!0));case 10:e.next=21;break;case 12:return e.prev=12,e.next=15,d.a.patch("/api/tickets/".concat(c._id,"/done"));case 15:N(!0),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(12),"Network Error"===e.t1.toJSON().message?(j(!1),o(!0)):(j(!0),o(!0));case 21:case"end":return e.stop()}}),e,null,[[1,7],[12,18]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.delete("/api/tickets/".concat(c._id));case 3:(t=e.sent).data.sort((function(e,t){return new Date(t.creationTime)-new Date(e.creationTime)})),n(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),"Network Error"===e.t0.toJSON().message?(j(!1),o(!0)):(j(!0),o(!0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"ticket",onMouseEnter:p.isMobile?null:function(){return B(!0)},onMouseLeave:p.isMobile?null:function(){return B(!1)},children:[(p.isMobile||D)&&Object(k.jsxs)("div",{className:"ticket-buttons",children:[Object(k.jsx)("button",{className:"hideTicketButton",onClick:function(e){return E(e)},children:"Hide"}),T?Object(k.jsx)(O.a,{fontSize:"large",className:"done-button",onClick:z}):Object(k.jsx)(h.a,{fontSize:"large",className:"done-button",onClick:z}),Object(k.jsx)(f.a,{fontSize:"large",className:"delete-button",onClick:A})]}),Object(k.jsx)("h3",{children:c.title}),Object(k.jsx)("p",{children:v&&c.content.length>400?"".concat(c.content.slice(0,400),"..."):c.content}),c.content.length>400?Object(k.jsx)("span",{className:"show-more-span",onClick:function(){return w(!v)},children:v?"Show more..":"Show less.."}):null,Object(k.jsxs)("div",{className:"ticket-info",children:[Object(k.jsx)("p",{children:"By ".concat(c.userEmail," | ").concat(new Date(c.creationTime).toLocaleString())}),c.labels?Object(k.jsx)("ul",{children:c.labels.map((function(e,t){return Object(k.jsx)("li",{className:"label",children:e},"labelKey #".concat(t))}))}):null]}),Object(k.jsx)("hr",{})]})}var m=n(78),v=n.n(m),w=n(178),S=n(166),g=n(167),T=n(168),N=n(174),y=n(170),C=n(171);function D(e){var t=e.setOpen,n=e.open,r=e.setTickets,c=e.setOpenSnackBar,a=e.setIsServerDown,i={title:"",content:"",userEmail:"",done:!1,creationTime:new Date,labels:[]},o={},u={},j={},b=function(){t(!1)},p=function(){var e=Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o.current.reportValidity()&&u.current.reportValidity()&&j.current.reportValidity())){e.next=14;break}return e.prev=1,e.next=4,d.a.post("/api/tickets/post",i);case 4:n=e.sent,console.log(n),n.data.sort((function(e,t){return new Date(t.creationTime)-new Date(e.creationTime)})),r(n.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"Network Error"===e.t0.toJSON().message?(a(!1),c(!0)):(a(!0),c(!0));case 13:t(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{id:"new-ticket",children:Object(k.jsxs)(w.a,{open:n,onClose:b,"aria-labelledby":"form-dialog-title",children:[Object(k.jsx)(S.a,{id:"form-dialog-title",children:"Add New Ticket"}),Object(k.jsxs)(g.a,{children:[Object(k.jsx)(T.a,{children:"Please fill out the form below, notice the require fields!"}),Object(k.jsx)(N.a,{required:!0,autoFocus:!0,margin:"dense",id:"title",label:"Title",fullWidth:!0,inputRef:o,onChange:function(e){return i.title=e.target.value},helperText:"At least 10 character"}),Object(k.jsx)(N.a,{required:!0,margin:"dense",id:"content",label:"Content",fullWidth:!0,inputRef:u,onChange:function(e){return i.content=e.target.value}}),Object(k.jsx)(N.a,{required:!0,margin:"dense",id:"email",label:"Email Address",type:"email",fullWidth:!0,inputRef:j,onChange:function(e){return i.userEmail=e.target.value},helperText:"Must include '@'"})]}),Object(k.jsxs)(y.a,{children:[Object(k.jsx)(C.a,{onClick:b,color:"primary",children:"Cancel"}),Object(k.jsx)(C.a,{onClick:p,color:"primary",children:"Submit"})]})]})})}function B(e){var t=e.setSearchText,n=e.tickets,c=e.counter,a=e.setCounter,i=e.setTickets,o=e.copyTicketArr,s=e.setOpenSnackBar,l=e.setIsServerDown,j=Object(r.useState)(!1),d=Object(u.a)(j,2),b=d[0],p=d[1],O=Object(k.jsxs)("span",{children:["(",Object(k.jsx)("span",{id:"hideTicketsCounter",children:c})," hidden tickets -"," ",Object(k.jsx)("button",{id:"restoreHideTickets",onClick:function(){o.sort((function(e,t){return new Date(t.creationTime)-new Date(e.creationTime)})),i(o),a(0)},children:"restore"})," ",")"]});return Object(k.jsxs)("div",{id:"header",children:[Object(k.jsx)("h1",{children:"Tickets Manager"}),Object(k.jsx)("input",{placeholder:"Search tickets by title",id:"searchInput",onChange:function(e){return t(e.target.value)}}),Object(k.jsx)(v.a,{fontSize:"large",className:"add-button",onClick:function(){p(!0)}}),Object(k.jsx)(D,{setOpen:p,open:b,setTickets:i,setOpenSnackBar:s,setIsServerDown:l}),Object(k.jsxs)("p",{children:["Showing ",n.length," results ",c>0?O:""]})]})}var E=n(53),z=n(5),A=n(79),M=n(179),I=n(172),J=Object(z.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return Object(k.jsx)(A.a,Object(E.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))}));function q(e){var t=e.tickets,n=e.setTickets,r=c.a.useState(null),a=Object(u.a)(r,2),i=a[0],o=a[1];return Object(k.jsxs)("div",{className:"sort-div",children:[Object(k.jsx)(C.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",onClick:function(e){o(e.currentTarget)},children:"Sort By Date:"}),Object(k.jsxs)(J,{id:"customized-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){o(null)},children:[Object(k.jsx)(M.a,{children:Object(k.jsx)(I.a,{primary:"New to old",onClick:function(){var e=Object(b.a)(t);e.sort((function(e,t){return new Date(t.creationTime)-new Date(e.creationTime)})),n(e),o(null)}})}),Object(k.jsx)(M.a,{children:Object(k.jsx)(I.a,{primary:"Old to new",onClick:function(){var e=Object(b.a)(t);e.sort((function(e,t){return new Date(e.creationTime)-new Date(t.creationTime)})),n(e),o(null)}})})]})]})}var W=n(177),R=n(175),H=n(173);function V(e){return Object(k.jsx)(R.a,Object(E.a)({elevation:6,variant:"filled"},e))}var _=Object(H.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function K(e){var t=e.openSnackBar,n=e.setOpenSnackBar,r=e.isServerDown,c=_(),a=function(e,t){"clickaway"!==t&&n(!1)};return Object(k.jsx)("div",{className:c.root,children:Object(k.jsx)(W.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:3e3,onClose:a,children:Object(k.jsx)(V,{onClose:a,severity:"error",children:r?"Our servers are down at this moment, we are working to fix the issue":"Your are disconnected from the internet, please reconnect!"})})})}function L(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(u.a)(a,2),o=i[0],j=i[1],b=Object(r.useState)(0),p=Object(u.a)(b,2),O=p[0],h=p[1],f=Object(r.useRef)(!0),m=Object(r.useState)([]),v=Object(u.a)(m,2),w=v[0],S=v[1],g=Object(r.useState)(!1),T=Object(u.a)(g,2),N=T[0],y=T[1],C=Object(r.useState)(!1),D=Object(u.a)(C,2),E=D[0],z=D[1];return Object(r.useEffect)((function(){!function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/api/tickets");case 3:(t=e.sent).data.sort((function(e,t){return new Date(t.creationTime)-new Date(e.creationTime)})),c(t.data),S(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),"Network Error"===e.t0.toJSON().message?(z(!1),y(!0)):(z(!0),y(!0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(r.useEffect)((function(){f.current?f.current=!1:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/api/tickets?searchText=".concat(o));case 3:(t=e.sent).data.sort((function(e,t){return new Date(t.creationTime)-new Date(e.creationTime)})),c(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),"Network Error"===e.t0.toJSON().message?(z(!1),y(!0)):(z(!0),y(!0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[o]),Object(k.jsxs)("div",{id:"main",children:[Object(k.jsx)(B,{setSearchText:j,setTickets:c,tickets:n,setCounter:h,counter:O,copyTicketArr:w,setOpenSnackBar:y,setIsServerDown:z}),Object(k.jsxs)("div",{className:"tickets-div",children:[Object(k.jsx)(q,{setTickets:c,tickets:n}),n.map((function(e,t){return Object(k.jsx)(x,{tickets:n,setTickets:c,ticket:e,setCounter:h,counter:O,setOpenSnackBar:y,setIsServerDown:z},"ticketKey #".concat(t))}))]}),Object(k.jsx)(K,{openSnackBar:N,setOpenSnackBar:y,isServerDown:E})]})}var F=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(L,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(F,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},40:function(e,t,n){},64:function(e,t,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.45f8f162.chunk.js.map